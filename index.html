<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solvimport - Kalkulator Profit Import</title>
    
    <!-- Tailwind CSS (Styling Modern) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons (Untuk Icon Modern) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Animasi Transisi Halus */
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Hide Number Input Arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; margin: 0; 
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen pb-20">

    <!-- 1. HEADER SECTION -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm">
        <div class="max-w-md mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2.5">
                <div class="bg-gradient-to-br from-blue-600 to-indigo-700 p-2 rounded-lg text-white shadow-lg shadow-blue-200">
                    <i data-lucide="calculator" class="w-5 h-5"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-tight text-slate-900 tracking-tight">Solvimport</h1>
                    <p class="text-[10px] text-slate-500 font-semibold uppercase tracking-wider">Profit Calculator</p>
                </div>
            </div>
            <div class="bg-indigo-50 text-indigo-700 text-[10px] px-2.5 py-1 rounded-full font-bold border border-indigo-100">
                v2.1 Stable
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 py-6 space-y-6">

        <!-- 2. COUNTRY SELECTOR -->
        <section>
            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 block px-1">
                Pilih Negara Asal
            </label>
            <div class="bg-white p-1.5 rounded-2xl border border-slate-200 shadow-sm grid grid-cols-3 gap-1.5" id="countryTabs">
                <!-- Tabs will be generated by JS -->
            </div>
        </section>

        <!-- 3. INPUT FORM SECTION -->
        <section class="bg-white p-5 rounded-3xl shadow-sm border border-slate-100 space-y-5">
            
            <!-- Product Name -->
            <div>
                <label class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5 block">Nama Produk</label>
                <input type="text" id="productName" placeholder="Contoh: Tas Laptop, Album BTS"
                    class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3.5 text-sm font-semibold text-slate-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder:font-normal">
            </div>

            <div class="grid grid-cols-2 gap-4">
                <!-- Price Input -->
                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5 block">
                        Harga (<span id="currencyCode">RMB</span>)
                    </label>
                    <div class="relative group">
                        <span id="currencySymbol" class="absolute left-3.5 top-3.5 text-slate-400 font-bold group-focus-within:text-indigo-500 transition-colors">Â¥</span>
                        <input type="number" id="priceForeign" placeholder="100"
                            class="w-full bg-slate-50 border border-slate-200 rounded-xl pl-8 pr-3 py-3.5 text-sm font-bold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all">
                    </div>
                </div>

                <!-- Weight Input -->
                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5 block">Berat (Kg)</label>
                    <div class="relative group">
                        <input type="number" id="weight" placeholder="0.5"
                            class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3.5 text-sm font-bold focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all">
                        <span class="absolute right-3.5 top-3.5 text-slate-400 text-xs font-bold pt-1">KG</span>
                    </div>
                </div>
            </div>

            <!-- Shipping Method -->
            <div>
                <label class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block">Metode Pengiriman</label>
                <div class="grid grid-cols-2 gap-3">
                    <!-- Air Button -->
                    <button type="button" onclick="setShippingMethod('air')" id="btnAir"
                        class="relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 bg-blue-50 border-blue-500 text-blue-700 shadow-sm ring-1 ring-blue-200">
                        <div class="p-1.5 rounded-full mb-1 bg-blue-200/50">
                            <i data-lucide="plane" class="w-4 h-4"></i>
                        </div>
                        <span class="text-xs font-bold">Via Udara</span>
                        <span id="leadTimeAir" class="text-[10px] opacity-70 mt-0.5 font-medium">7-10 Hari</span>
                    </button>
                    
                    <!-- Sea Button -->
                    <button type="button" onclick="setShippingMethod('sea')" id="btnSea"
                        class="relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 bg-white border-slate-200 text-slate-400 hover:border-slate-300">
                        <div class="p-1.5 rounded-full mb-1 bg-slate-100">
                            <i data-lucide="ship" class="w-4 h-4"></i>
                        </div>
                        <span class="text-xs font-bold">Via Laut</span>
                        <span id="leadTimeSea" class="text-[10px] opacity-70 mt-0.5 font-medium">3-4 Minggu</span>
                    </button>
                </div>
            </div>

            <!-- Selling Price -->
            <div class="pt-2 border-t border-slate-100">
                <label class="text-xs font-bold text-green-600 uppercase tracking-wider mb-1.5 block flex justify-between">
                    <span>Rencana Jual (IDR)</span>
                </label>
                <div class="relative group">
                    <span class="absolute left-3.5 top-3.5 text-green-600 text-xs font-bold pt-0.5">Rp</span>
                    <input type="number" id="sellingPrice" placeholder="Masukkan harga jual..."
                        class="w-full bg-green-50 border border-green-200 rounded-xl pl-10 pr-4 py-3.5 text-sm font-bold text-green-800 placeholder-green-400/70 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all">
                </div>
            </div>
        </section>

        <!-- 4. RESULTS SECTION (Hidden by default) -->
        <div id="resultContainer" class="hidden space-y-4 fade-in-up">
            
            <!-- Cost Breakdown -->
            <div class="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-5 text-slate-900">
                    <i data-lucide="package" class="w-20 h-20"></i>
                </div>
                
                <h3 class="text-xs font-extrabold text-slate-900 mb-5 flex items-center gap-2 uppercase tracking-wider">
                    <span class="w-1 h-4 bg-indigo-500 rounded-full"></span>
                    Analisa Modal (HPP)
                </h3>
                
                <div class="space-y-3 text-sm relative z-10">
                    <div class="flex justify-between items-center text-slate-600">
                        <span>Harga Barang</span>
                        <span id="resPriceIdr" class="font-semibold tabular-nums">Rp 0</span>
                    </div>
                    <div class="flex justify-between items-center text-slate-600">
                        <div class="flex items-center gap-1">
                            <span>Ongkir & Pajak (All-in)</span>
                        </div>
                        <span id="resShippingCost" class="font-semibold tabular-nums text-orange-600">Rp 0</span>
                    </div>
                    <div class="border-t border-dashed border-slate-200 my-2"></div>
                    <div class="flex justify-between items-center pt-1">
                        <span class="font-bold text-slate-800">Total Modal Bersih</span>
                        <span id="resTotalCost" class="font-bold text-indigo-700 text-lg tabular-nums">Rp 0</span>
                    </div>
                </div>
            </div>

            <!-- Profit Card -->
            <div id="profitCard" class="rounded-3xl p-6 text-white shadow-xl shadow-slate-200 relative overflow-hidden transition-colors duration-500 bg-slate-900">
                <div class="relative z-10 text-center space-y-2">
                    <p id="profitLabel" class="text-slate-400 text-[10px] uppercase font-bold tracking-widest">
                        Potensi Keuntungan
                    </p>
                    
                    <h2 id="resProfit" class="text-4xl font-extrabold tracking-tight tabular-nums">
                        Rp 0
                    </h2>
                    
                    <div id="roiBadge" class="inline-flex items-center gap-1.5 bg-green-500/20 px-4 py-1.5 rounded-full border border-green-500/30 backdrop-blur-sm mt-2">
                        <i data-lucide="trending-up" class="w-3.5 h-3.5 text-green-400"></i>
                        <span id="resRoi" class="text-green-400 text-xs font-bold">ROI: 0%</span>
                    </div>
                </div>
                
                <!-- Background Effects -->
                <div class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
                    <div class="absolute -top-20 -right-20 w-48 h-48 bg-indigo-500 rounded-full blur-3xl mix-blend-screen"></div>
                    <div class="absolute -bottom-20 -left-20 w-48 h-48 bg-blue-500 rounded-full blur-3xl mix-blend-screen"></div>
                </div>
            </div>

            <!-- WhatsApp CTA -->
            <a id="btnWhatsapp" href="#" target="_blank"
                class="group w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-bold py-4 rounded-2xl shadow-lg shadow-orange-200 flex items-center justify-center gap-3 transition-all active:scale-95">
                <span class="text-sm">Impor Barang Ini Sekarang</span>
                <div class="bg-white/20 p-1 rounded-full group-hover:translate-x-1 transition-transform">
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </div>
            </a>

            <p class="text-center text-[10px] text-slate-400 px-6 leading-relaxed">
                *Disclaimer: Estimasi biaya sudah termasuk Pajak & Bea Masuk (All-in). Harga final dapat menyesuaikan kategori barang (HS Code).
            </p>
        </div>

        <!-- Empty State (Shown when no result) -->
        <div id="emptyState" class="text-center py-12 px-4 opacity-60">
            <div class="w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300">
                <i data-lucide="globe" class="w-10 h-10"></i>
            </div>
            <h3 class="text-slate-900 font-bold mb-1 text-sm">Siap Menghitung Cuan?</h3>
            <p class="text-slate-500 text-xs max-w-[200px] mx-auto leading-relaxed">
                Masukkan data barang dari marketplace luar negeri untuk melihat estimasi modal.
            </p>
        </div>

    </main>

    <footer class="text-center py-6 text-[10px] text-slate-300">
        <p>&copy; 2025 Solvimport Logistics System.</p>
        <p>Built by CEO Office.</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. CONFIGURATION ---
        const COUNTRIES = {
            china: {
                id: 'china', name: 'China', flag: 'ðŸ‡¨ðŸ‡³', currency: 'RMB', symbol: 'Â¥',
                rateToIdr: 2350, shippingAir: 230000, shippingSea: 15000,
                leadTimeAir: '7-10 Hari', leadTimeSea: '3-4 Minggu'
            },
            korea: {
                id: 'korea', name: 'Korea', flag: 'ðŸ‡°ðŸ‡·', currency: 'KRW', symbol: 'â‚©',
                rateToIdr: 13, shippingAir: 295000, shippingSea: 25000,
                leadTimeAir: '7-14 Hari', leadTimeSea: '3-5 Minggu'
            },
            japan: {
                id: 'japan', name: 'Jepang', flag: 'ðŸ‡¯ðŸ‡µ', currency: 'JPY', symbol: 'Â¥',
                rateToIdr: 112, shippingAir: 310000, shippingSea: 28000,
                leadTimeAir: '7-14 Hari', leadTimeSea: '3-5 Minggu'
            }
        };

        // --- 2. GLOBAL STATE ---
        let state = {
            country: COUNTRIES.china,
            method: 'air', // 'air' or 'sea'
            form: {
                productName: '',
                price: '',
                weight: '',
                sellingPrice: ''
            }
        };

        // --- 3. DOM ELEMENTS ---
        const els = {
            countryTabs: document.getElementById('countryTabs'),
            productName: document.getElementById('productName'),
            priceForeign: document.getElementById('priceForeign'),
            weight: document.getElementById('weight'),
            sellingPrice: document.getElementById('sellingPrice'),
            currencyCode: document.getElementById('currencyCode'),
            currencySymbol: document.getElementById('currencySymbol'),
            btnAir: document.getElementById('btnAir'),
            btnSea: document.getElementById('btnSea'),
            leadTimeAir: document.getElementById('leadTimeAir'),
            leadTimeSea: document.getElementById('leadTimeSea'),
            resultContainer: document.getElementById('resultContainer'),
            emptyState: document.getElementById('emptyState'),
            // Results
            resPriceIdr: document.getElementById('resPriceIdr'),
            resShippingCost: document.getElementById('resShippingCost'),
            resTotalCost: document.getElementById('resTotalCost'),
            resProfit: document.getElementById('resProfit'),
            resRoi: document.getElementById('resRoi'),
            profitCard: document.getElementById('profitCard'),
            roiBadge: document.getElementById('roiBadge'),
            profitLabel: document.getElementById('profitLabel'),
            btnWhatsapp: document.getElementById('btnWhatsapp')
        };

        // --- 4. FUNCTIONS ---

        function formatIDR(num) {
            return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumFractionDigits: 0 }).format(num);
        }

        function renderCountryTabs() {
            els.countryTabs.innerHTML = '';
            Object.values(COUNTRIES).forEach(c => {
                const isActive = state.country.id === c.id;
                const btn = document.createElement('button');
                btn.className = `flex flex-col items-center justify-center py-3 px-1 rounded-xl transition-all duration-200 ${
                    isActive 
                    ? 'bg-indigo-50 border border-indigo-200 text-indigo-700 shadow-sm ring-1 ring-indigo-200' 
                    : 'hover:bg-slate-50 text-slate-500 border border-transparent'
                }`;
                btn.onclick = () => setCountry(c.id);
                btn.innerHTML = `
                    <span class="text-2xl mb-1 filter drop-shadow-sm">${c.flag}</span>
                    <span class="text-xs font-bold">${c.name}</span>
                `;
                els.countryTabs.appendChild(btn);
            });
        }

        function setCountry(countryId) {
            state.country = COUNTRIES[countryId];
            // Reset input price because currency changes
            state.form.price = '';
            els.priceForeign.value = '';
            
            // Update UI Labels
            els.currencyCode.textContent = state.country.currency;
            els.currencySymbol.textContent = state.country.symbol;
            els.leadTimeAir.textContent = state.country.leadTimeAir;
            els.leadTimeSea.textContent = state.country.leadTimeSea;
            
            renderCountryTabs();
            calculate();
        }

        function setShippingMethod(method) {
            state.method = method;
            
            // Update UI Styles
            const activeClass = "bg-blue-50 border-blue-500 text-blue-700 shadow-sm ring-1 ring-blue-200";
            const seaActiveClass = "bg-teal-50 border-teal-500 text-teal-700 shadow-sm ring-1 ring-teal-200";
            const inactiveClass = "bg-white border-slate-200 text-slate-400 hover:border-slate-300";

            if (method === 'air') {
                els.btnAir.className = `relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 ${activeClass}`;
                els.btnSea.className = `relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 ${inactiveClass}`;
                // Change icon background logic if needed, but keeping simple for now
            } else {
                els.btnAir.className = `relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 ${inactiveClass}`;
                els.btnSea.className = `relative overflow-hidden rounded-xl border p-3 flex flex-col items-center justify-center transition-all duration-200 ${seaActiveClass}`;
            }
            calculate();
        }

        function calculate() {
            // Get values
            const priceVal = parseFloat(els.priceForeign.value);
            const weightVal = parseFloat(els.weight.value);
            const sellingPriceVal = parseFloat(els.sellingPrice.value);
            const productName = els.productName.value;

            // Validate mandatory fields
            if (!priceVal || !weightVal) {
                els.resultContainer.classList.add('hidden');
                els.emptyState.classList.remove('hidden');
                return;
            }

            els.resultContainer.classList.remove('hidden');
            els.emptyState.classList.add('hidden');

            // 1. Calculate Product Price (IDR)
            const priceIdr = priceVal * state.country.rateToIdr;

            // 2. Calculate Shipping
            let shippingCost = 0;
            if (state.method === 'air') {
                shippingCost = weightVal * state.country.shippingAir;
            } else {
                shippingCost = weightVal * state.country.shippingSea;
                if (shippingCost < 50000) shippingCost = 50000; // Min charge logic simulation
            }

            // 3. Total Cost
            const totalCost = priceIdr + shippingCost;

            // 4. Profit & ROI
            let profit = 0;
            let roi = 0;
            
            if (sellingPriceVal) {
                profit = sellingPriceVal - totalCost;
                roi = totalCost > 0 ? (profit / totalCost) * 100 : 0;
            }

            // Update DOM
            els.resPriceIdr.textContent = formatIDR(priceIdr);
            els.resShippingCost.textContent = formatIDR(shippingCost);
            els.resTotalCost.textContent = formatIDR(totalCost);
            els.resProfit.textContent = formatIDR(profit);
            els.resRoi.textContent = `ROI: ${roi.toFixed(1)}%`;

            // Update Profit Card Styling
            if (profit > 0) {
                els.profitCard.classList.remove('bg-red-500');
                els.profitCard.classList.add('bg-slate-900');
                els.profitLabel.textContent = 'Potensi Keuntungan';
                els.roiBadge.className = "inline-flex items-center gap-1.5 bg-green-500/20 px-4 py-1.5 rounded-full border border-green-500/30 backdrop-blur-sm mt-2";
                els.roiBadge.querySelector('span').classList.remove('text-white');
                els.roiBadge.querySelector('span').classList.add('text-green-400');
            } else if (sellingPriceVal && profit <= 0) {
                els.profitCard.classList.remove('bg-slate-900');
                els.profitCard.classList.add('bg-red-500');
                els.profitLabel.textContent = 'Potensi Kerugian';
                els.roiBadge.className = "inline-flex items-center gap-1.5 bg-white/20 px-4 py-1.5 rounded-full backdrop-blur-sm mt-2";
                els.roiBadge.querySelector('span').classList.remove('text-green-400');
                els.roiBadge.querySelector('span').classList.add('text-white');
            }

            // Update WhatsApp Link
            const text = `Halo Solvimport, saya tertarik impor ${productName || 'barang'} dari ${state.country.name}. Harga ${state.country.symbol}${priceVal}, Berat ${weightVal}kg. Mohon dibantu.`;
            els.btnWhatsapp.href = `https://wa.me/6287767340075?text=${encodeURIComponent(text)}`;
        }

        // --- 5. INITIALIZATION & EVENTS ---
        function init() {
            renderCountryTabs();
            // Initialize Icons
            lucide.createIcons();
            
            // Add Listeners
            [els.priceForeign, els.weight, els.sellingPrice, els.productName].forEach(input => {
                input.addEventListener('input', calculate);
            });
        }

        init();

    </script>
</body>
</html>
